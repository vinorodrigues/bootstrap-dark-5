<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## bootstrap-dark-5

`darkmode.js`, the JavaScript module.

Use this JS file, and it's `darkmode` object, in your HTML to automatically capture `prefers-color-scheme` media query
events and also initialize the document root (`<HTML>` tag) with the user prefered color scheme.

The `darkmode` object can also be used to drive a dark mode toggle event, with optional persistance
storage in either a cookie (if GDPR consent is given) or the browsers `localStorage` object.

**Meta**

-   **author**: Vino Rodrigues

## DarkMode

### isInDarkMode

Used to store the current state, `true` when in dark mode, `false` when in light mode

Type: bool

### hasGDPRConsent

Variable to store GDPR Consent

Used in [DarkMode~saveValue][1] to determin if a cookie or the `localStorage` object should be used.

-   Set to `true` when GDPR Consent has been given to enable storage to cookie _(useful in Server-Side knowlage of user preference)_
-   Default is `false`, thus storage will use the browsers localStorage object _(Note: No expiry is set)_

### cookieExpiry

Expiry time in days when saving and GDPR consent is give

### documentRoot

Saves the instance of the documentRoot (i.e. `<html>` tag) when the object is created.

### saveValue

Save the current color-scheme mode

#### Parameters

-   `name` **[string][2]** \-- Name of the cookie or localStorage->name, is dependant on [DarkMode#hasGDPRConsent][3]
-   `value` **[string][2]** \-- Should be one of `light` or `dark`
-   `days` **[number][4]** \-- Number of days to expire the cookie when the cookie is used (optional, default `this.cookieExpiry`)

Returns **void** 

### readValue

Retrieves the color-scheme last saved

NOTE: is dependant on [DarkMode#hasGDPRConsent][3]

#### Parameters

-   `name` **[string][2]** \-- Name of the cookie or localStorage->name

Returns **[string][2]** \-- The saved value, iether `light` or `dark`, or an empty string if not saved prior

### eraseValue

Deletes the saved color-scheme

NOTE: is dependant on [DarkMode#hasGDPRConsent][3]

#### Parameters

-   `name` **[string][2]** 

Returns **void** \-- Nothing, erasure is assumed

### getSavedColorScheme

Queries the `<HTML>` tag for the current color-scheme

(This value is set prior via the [DarkMode~setDarkMode][5]) function.)

Returns **[string][2]** \-- The current value, iether `light` or `dark`, or an empty string if not saved prior

### getPreferedColorScheme

Queries the `prefers-color-scheme` media query for the current color-scheme

(This value is set prior via the [DarkMode~setDarkMode][5]) function.)

Returns **[string][2]** \-- The current value, iether `light` or `dark`, or an empty string if the media query is not supported

### setDarkMode

Sets the color-scheme in the `<HTML>` tag as a class called either `light` or `dark`

#### Parameters

-   `darkMode` **bool** \-- `true` for "dark", `false` for 'light'
-   `doSave` **bool** \-- If `true`, then will also call [DarkMode~saveValue][1] to save that state (optional, default `true`)

#### Examples

```javascript
`<html lang="en" class="dark">`
```

```javascript
`<html lang="en" class="light">`
```

Returns **void** \-- Nothing, assumes saved

### toggleDarkMode

Toggles the color-scheme in the `<HTML>` tag as a class called either `light` or `dark`
based on the inverse of it's prior state.

See [DarkMode~setDarkMode][5]

#### Parameters

-   `doSave`   (optional, default `true`)

Returns **void** Nothing, assumes success

### resetDarkMode

Calls [DarkMode~eraseValue][6] to erase any saved value, and then
calls [DarkMode~getPreferedColorScheme][7] to retrieve the `prefers-color-scheme` media query,
passing its value to [DarkMode~setDarkMode][5] to reset the users preference.

Returns **void** Nothing, no error handling is performed.

### DATA_NAME

**_const_** -- Name of the cookie or localStorage->name when saving

### LIGHT

**_const_** -- String used to identify light mode (do not change), @see [https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme][8]

### DARK

**_const_** -- String used to identify dark mode (do not change), @see [https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme][8]

### updatePreferedColorSchemeEvent

**_static_** -- function called by the media query on change event.

First retrieves any saved value, and if present ignores the event, but
if not set then triggers the [darkmode~setDarkMode][9] function to chnage the current mode.

Returns **void** \-- Nothing, assumes success

### onDOMContentLoaded

**_static_** -- function called when the DOM finishes loading.

Does all the DarkMode initialization, including:

-   Loading any prior stored preference (GDPR consent is **_not_** assumed)
-   else, honoring any `<HTML>` tag `class="dark|light"` that Server-Side may set
-   else, honoring the browser / OS `prefers-color-scheme` preference
    and setting the derived mode by calling [darkmode~setDarkMode][9]

Followd by setting up the media query on change event

Returns **void** 

## darkmode

**_const_** -- This is the global instance (object) of the DarkMode class.

[1]: DarkMode~saveValue

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[3]: #darkmodehasgdprconsent

[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[5]: DarkMode~setDarkMode

[6]: DarkMode~eraseValue

[7]: DarkMode~getPreferedColorScheme

[8]: https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme

[9]: darkmode~setDarkMode
